<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Parallel and chunk-wise processing of Spectra — processingChunkSize • Spectra</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parallel and chunk-wise processing of Spectra — processingChunkSize"><meta name="description" content="Many operations on Spectra objects, specifically those working with
the actual MS data (peaks data), allow a chunk-wise processing in which
the Spectra is splitted into smaller parts (chunks) that are
iteratively processed. This enables parallel processing of the data (by
data chunk) and also reduces the memory demand  since only the MS data
of the currently processed subset is loaded into memory and processed.
This chunk-wise processing, which is by default disabled, can be enabled
by setting the processing chunk size of a Spectra with the
processingChunkSize() function to a value which is smaller than the
length of the Spectra object. Setting processingChunkSize(sps) &amp;lt;- 1000
will cause any data manipulation operation on the sps, such as
filterIntensity() or bin(), to be performed eventually in parallel for
sets of 1000 spectra in each iteration.
Such chunk-wise processing is specifically useful for Spectra objects
using an on-disk backend or for very large experiments. For small data
sets or Spectra using an in-memory backend, a direct processing might
however be more efficient. Setting the chunk size to Inf will disable
the chunk-wise processing.
For some backends a certain type of splitting and chunk-wise processing
might be preferable. The MsBackendMzR backend for example needs to load
the MS data from the original (mzML) files, hence chunk-wise processing
on a per-file basis would be ideal. The backendParallelFactor() function
for MsBackend allows backends to suggest a preferred splitting of the
data by returning a factor defining the respective data chunks. The
MsBackendMzR returns for example a factor based on the dataStorage
spectra variable. A factor of length 0 is returned if no particular
preferred splitting should be performed. The suggested chunk definition
will be used if no finite processingChunkSize() is defined. Setting
the processingChunkSize overrides backendParallelFactor.
See the Large-scale data handling and processing with Spectra for more
information and examples.
Functions to configure parallel or chunk-wise processing:
processingChunkSize(): allows to get or set the size of the chunks for
parallel processing or chunk-wise processing of a Spectra in general.
With a value of Inf (the default) no chunk-wise processing will be
performed.
processingChunkFactor(): returns a factor defining the chunks into
which a Spectra will be split for chunk-wise (parallel) processing.
A factor of length 0 indicates that no chunk-wise processing will be
performed.

"><meta property="og:description" content="Many operations on Spectra objects, specifically those working with
the actual MS data (peaks data), allow a chunk-wise processing in which
the Spectra is splitted into smaller parts (chunks) that are
iteratively processed. This enables parallel processing of the data (by
data chunk) and also reduces the memory demand  since only the MS data
of the currently processed subset is loaded into memory and processed.
This chunk-wise processing, which is by default disabled, can be enabled
by setting the processing chunk size of a Spectra with the
processingChunkSize() function to a value which is smaller than the
length of the Spectra object. Setting processingChunkSize(sps) &amp;lt;- 1000
will cause any data manipulation operation on the sps, such as
filterIntensity() or bin(), to be performed eventually in parallel for
sets of 1000 spectra in each iteration.
Such chunk-wise processing is specifically useful for Spectra objects
using an on-disk backend or for very large experiments. For small data
sets or Spectra using an in-memory backend, a direct processing might
however be more efficient. Setting the chunk size to Inf will disable
the chunk-wise processing.
For some backends a certain type of splitting and chunk-wise processing
might be preferable. The MsBackendMzR backend for example needs to load
the MS data from the original (mzML) files, hence chunk-wise processing
on a per-file basis would be ideal. The backendParallelFactor() function
for MsBackend allows backends to suggest a preferred splitting of the
data by returning a factor defining the respective data chunks. The
MsBackendMzR returns for example a factor based on the dataStorage
spectra variable. A factor of length 0 is returned if no particular
preferred splitting should be performed. The suggested chunk definition
will be used if no finite processingChunkSize() is defined. Setting
the processingChunkSize overrides backendParallelFactor.
See the Large-scale data handling and processing with Spectra for more
information and examples.
Functions to configure parallel or chunk-wise processing:
processingChunkSize(): allows to get or set the size of the chunks for
parallel processing or chunk-wise processing of a Spectra in general.
With a value of Inf (the default) no chunk-wise processing will be
performed.
processingChunkFactor(): returns a factor defining the chunks into
which a Spectra will be split for chunk-wise (parallel) processing.
A factor of length 0 indicates that no chunk-wise processing will be
performed.

"><meta property="og:image" content="https://rformassspectrometry.github.io/Spectra/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Spectra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.15.11</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/Spectra.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/MsBackend.html">Creating new `MsBackend` classes</a></li>
    <li><a class="dropdown-item" href="../articles/Spectra-large-scale.html">Large-scale data handling and processing with Spectra</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RforMassSpectrometry/Spectra/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Parallel and chunk-wise processing of <code>Spectra</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/RforMassSpectrometry/Spectra/blob/main/R/Spectra-functions.R" class="external-link"><code>R/Spectra-functions.R</code></a>, <a href="https://github.com/RforMassSpectrometry/Spectra/blob/main/R/Spectra.R" class="external-link"><code>R/Spectra.R</code></a></small>
      <div class="d-none name"><code>processingChunkSize.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Many operations on <code>Spectra</code> objects, specifically those working with
the actual MS data (peaks data), allow a chunk-wise processing in which
the <code>Spectra</code> is splitted into smaller parts (chunks) that are
iteratively processed. This enables parallel processing of the data (by
data chunk) and also reduces the memory demand  since only the MS data
of the currently processed subset is loaded into memory and processed.
This chunk-wise processing, which is by default disabled, can be enabled
by setting the processing chunk size of a <code>Spectra</code> with the
<code>processingChunkSize()</code> function to a value which is smaller than the
length of the <code>Spectra</code> object. Setting <code>processingChunkSize(sps) &lt;- 1000</code>
will cause any data manipulation operation on the <code>sps</code>, such as
<code><a href="filterMsLevel.html">filterIntensity()</a></code> or <code><a href="addProcessing.html">bin()</a></code>, to be performed eventually in parallel for
sets of 1000 spectra in each iteration.</p>
<p>Such chunk-wise processing is specifically useful for <code>Spectra</code> objects
using an <em>on-disk</em> backend or for very large experiments. For small data
sets or <code>Spectra</code> using an in-memory backend, a direct processing might
however be more efficient. Setting the chunk size to <code>Inf</code> will disable
the chunk-wise processing.</p>
<p>For some backends a certain type of splitting and chunk-wise processing
might be preferable. The <code>MsBackendMzR</code> backend for example needs to load
the MS data from the original (mzML) files, hence chunk-wise processing
on a per-file basis would be ideal. The <code>backendParallelFactor()</code> function
for <code>MsBackend</code> allows backends to suggest a preferred splitting of the
data by returning a <code>factor</code> defining the respective data chunks. The
<code>MsBackendMzR</code> returns for example a <code>factor</code> based on the <em>dataStorage</em>
spectra variable. A <code>factor</code> of length 0 is returned if no particular
preferred splitting should be performed. The suggested chunk definition
will be used if no finite <code>processingChunkSize()</code> is defined. Setting
the <code>processingChunkSize</code> overrides <code>backendParallelFactor</code>.</p>
<p>See the <em>Large-scale data handling and processing with Spectra</em> for more
information and examples.</p>
<p>Functions to configure parallel or chunk-wise processing:</p><ul><li><p><code>processingChunkSize()</code>: allows to get or set the size of the chunks for
parallel processing or chunk-wise processing of a <code>Spectra</code> in general.
With a value of <code>Inf</code> (the default) no chunk-wise processing will be
performed.</p></li>
<li><p><code>processingChunkFactor()</code>: returns a <code>factor</code> defining the chunks into
which a <code>Spectra</code> will be split for chunk-wise (parallel) processing.
A <code>factor</code> of length 0 indicates that no chunk-wise processing will be
performed.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">processingChunkSize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">processingChunkSize</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">processingChunkFactor</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># S4 method for class 'Spectra'</span></span>
<span><span class="fu"><a href="MsBackend.html">backendBpparam</a></span><span class="op">(</span><span class="va">object</span>, BPPARAM <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/BiocParallel/man/register.html" class="external-link">bpparam</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p><code>Spectra</code>.</p></dd>


<dt id="arg-value">value<a class="anchor" aria-label="anchor" href="#arg-value"></a></dt>
<dd><p><code>integer(1)</code> defining the chunk size.</p></dd>


<dt id="arg-object">object<a class="anchor" aria-label="anchor" href="#arg-object"></a></dt>
<dd><p><code>Spectra</code> object.</p></dd>


<dt id="arg-bpparam">BPPARAM<a class="anchor" aria-label="anchor" href="#arg-bpparam"></a></dt>
<dd><p>Parallel setup configuration. See <code><a href="https://rdrr.io/pkg/BiocParallel/man/register.html" class="external-link">bpparam()</a></code> for more
information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code>processingChunkSize()</code> returns the currently defined processing
chunk size (or <code>Inf</code> if it is not defined). <code>processingChunkFactor()</code>
returns a <code>factor</code> defining the chunks into which <code>x</code> will be split
for (parallel) chunk-wise processing or a <code>factor</code> of length 0 if
no splitting is defined.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Some backends might not support parallel processing at all.
For these, the <code><a href="MsBackend.html">backendBpparam()</a></code> function will always return a
<code><a href="https://rdrr.io/pkg/BiocParallel/man/SerialParam-class.html" class="external-link">SerialParam()</a></code> independently on how parallel processing was defined.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Johannes Rainer</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by RforMassSpectrometry Package Maintainer, Laurent Gatto, Johannes Rainer, Sebastian Gibb, Philippine Louail.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

